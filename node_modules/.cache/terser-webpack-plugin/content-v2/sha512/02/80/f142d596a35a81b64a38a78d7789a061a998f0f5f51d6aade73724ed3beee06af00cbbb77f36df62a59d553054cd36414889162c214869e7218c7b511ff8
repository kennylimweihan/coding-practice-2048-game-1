{"code":"!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";i.r(e);var r=function(){function t(){this.lapsedTime=0,this.node=document.getElementById(\"timer\"),this.renderTimer(this.lapsedTime),this.tickTimer(),this.timerIsEnd=!1}return t.prototype.renderTimer=function(t){var e=t%60,i=(t-e)/60,r=i%60,n=(i=(i-r)/60)%24,s=String(e),o=String(r),h=String(n);s.length<2&&(s=\"0\"+s),o.length<2&&(o=\"0\"+o),h.length<2&&(h=\"0\"+h),this.node.innerHTML=h+\" : \"+o+\" : \"+s},t.prototype.tickTimer=function(){var t=this;setTimeout(function(){t.timerIsEnd?(t.node.style.fontWeight=\"bold\",t.node.style.fontSize=\"1.7em\"):(t.tickTimer(),t.lapsedTime++,t.renderTimer(t.lapsedTime))},1e3)},t}(),n=function(){function t(t,e,i,r){var n=this;this.downKeyCallback=t,this.upKeyCallback=e,this.leftKeyCallback=i,this.rightKeyCallback=r,document.addEventListener(\"keydown\",function(t){n.keyDownHandler(t)},!1)}return t.prototype.keyDownHandler=function(t){this.timer||(this.timer=new r),39==t.keyCode?this.rightKeyCallback():37==t.keyCode?this.leftKeyCallback():40==t.keyCode?this.downKeyCallback():38==t.keyCode&&this.upKeyCallback()},t}();var s=function(){function t(){}return t.prototype.create=function(t){this.node=document.createElement(\"div\"),this.node.className=\"cell\",t.append(this.node)},t.prototype.setValue=function(t){this.value=t,this.render()},t.prototype.render=function(){0!=this.value?(this.node.style.fontSize=String(30)+\"px\",this.node.innerHTML=String(this.value)):this.node.innerHTML=\"\",this.node.style.backgroundColor=function(t){switch(t){case 0:return\"rgb(255, 234, 230)\";case 2:return\"rgb(255,172,154)\";case 4:return\"rgb(255, 223, 154)\";case 8:return\"rgb(237, 255, 154)\";case 16:return\"rgb(186, 255, 154)\";case 32:return\"rgb(154, 255, 172)\";case 64:return\"rgb(255, 89, 52)\";case 128:return\"rgb(255, 191, 52)\";case 256:return\"rgb(218, 255, 52)\";case 512:return\"rgb(116, 255, 52)\";case 1024:return\"rgb(52, 255, 89)\";case 2048:return\"rgb(52, 255, 191)\"}}(this.value)},t}(),o=function(){function t(t){this.grid=[],this.node=document.getElementById(\"grid\");for(var e=\"\",i=0;i<t.length;i++)e+=\"70px \";this.node.style.gridTemplateColumns=e,this.node.style.gridTemplateRows=e;for(i=0;i<t.length;i++){for(var r=[],n=0;n<t[i].length;n++){var o=t[i][n],h=new s;h.create(this.node),h.setValue(o),r.push(h)}this.grid.push(r),r=[]}}return t.prototype.redraw=function(t){for(var e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++){var r=t[e][i];this.grid[e][i].setValue(r)}},t}(),h=function(){function t(t,e){this.grid=t,this.gameOverHandler=e,this.emptyCells=[],this.prevGrid=[],this.presGrid=new o(this.grid),this.gameStatus=\"ongoing\",this.gridIsChanged=!0,this.nextState(),this.gridIsChanged=!0,this.nextState()}return t.prototype.nextState=function(){this._arrayIsSame(this.prevGrid,this.grid)||(this.gridIsChanged=!0);t:for(var t=0;t<this.grid[0].length;t++)for(var e=0;e<this.grid.length;e++)if(0==this.grid[t][e])this.emptyCells.push({i:t,j:e});else if(2048==this.grid[t][e]){this.gameStatus=\"win\";break t}if(this.gridIsChanged||0!=this.emptyCells.length||this._isDeadGrid()&&(this.gameStatus=\"lose\"),\"win\"==this.gameStatus||\"lose\"==this.gameStatus)return this.gameOverHandler(this.gameStatus),void this.presGrid.redraw(this.grid);if(this.gridIsChanged){var i=this.emptyCells[Math.floor(Math.random()*this.emptyCells.length)];this.grid[i.i][i.j]=2,this.gridIsChanged=!1}this.emptyCells=[],this.presGrid.redraw(this.grid)},t.prototype.moveRight=function(){this._storeGridScreenshot(),this._mergeRightAll(),this.nextState()},t.prototype.moveUp=function(){this._storeGridScreenshot(),this._clockwiseRotate(),this._mergeRightAll(),this._antiClockwiseRotate(),this.nextState()},t.prototype.moveDown=function(){this._storeGridScreenshot(),this._antiClockwiseRotate(),this._mergeRightAll(),this._clockwiseRotate(),this.nextState()},t.prototype.moveLeft=function(){this._storeGridScreenshot(),this._clockwiseRotate(),this._clockwiseRotate(),this._mergeRightAll(),this._antiClockwiseRotate(),this._antiClockwiseRotate(),this.nextState()},t.prototype._mergeRightAll=function(){for(var t=0;t<this.grid.length;t++)this.grid[t]=this._mergeRight(this.grid[t])},t.prototype._mergeRight=function(t){for(var e=t.filter(function(t){return 0!=t}),i=e.length-1;i>0;i--)e[i]==e[i-1]&&(e[i-1]*=2,e[i]=0,i--);return e=e.filter(function(t){return 0!=t}),Array.apply(null,new Array(t.length-e.length)).map(function(){return 0}).concat(e)},t.prototype._clockwiseRotate=function(){for(var t=this.grid.length,e=0;e<Math.floor(t/2);e++)for(var i=e;i<t-1-e;i++){var r=this.grid[e][i];this.grid[e][i]=this.grid[t-1-i][e],this.grid[t-1-i][e]=this.grid[t-1-e][t-1-i],this.grid[t-1-e][t-1-i]=this.grid[i][t-1-e],this.grid[i][t-1-e]=r}},t.prototype._antiClockwiseRotate=function(){for(var t=this.grid.length,e=0;e<Math.floor(t/2);e++)for(var i=e;i<t-1-e;i++){var r=this.grid[e][i];this.grid[e][i]=this.grid[i][t-1-e],this.grid[i][t-1-e]=this.grid[t-1-e][t-1-i],this.grid[t-1-e][t-1-i]=this.grid[t-1-i][e],this.grid[t-1-i][e]=r}},t.prototype._storeGridScreenshot=function(){if(0==this.prevGrid.length)for(var t=[],e=0;e<this.grid.length;e++){for(var i=0;i<this.grid[0].length;i++)t.push(this.grid[e][i]);this.prevGrid.push(t),t=[]}else for(e=0;e<this.grid.length;e++)for(i=0;i<this.grid[0].length;i++)this.prevGrid[e][i]=this.grid[e][i]},t.prototype._arrayIsSame=function(t,e){for(var i=0;i<t.length;i++)for(var r=0;r<t[i].length;r++)if(t[i][r]!=e[i][r])return!1;return!0},t.prototype._isDeadGrid=function(){for(var t=0;t<this.grid.length;t++)for(var e=0;e<this.grid[t].length-1;e++)if(this.grid[t][e]==this.grid[t][e+1])return!1;this._clockwiseRotate();for(t=0;t<this.grid.length;t++)for(e=0;e<this.grid[t].length-1;e++)if(this.grid[t][e]==this.grid[t][e+1])return this._antiClockwiseRotate(),!1;return this._antiClockwiseRotate(),!0},t}();new(function(){function t(t){this.init(t)}return t.prototype.init=function(t){for(var e=this,i=[],r=[],s=0;s<t;s++){for(var o=0;o<t;o++)r.push(0);i.push(r),r=[]}this.gridMan=new h(i,function(t){e.endGameHandler(t)}),this.keyMan=new n(function(){e.gridMan.moveDown()},function(){e.gridMan.moveUp()},function(){e.gridMan.moveLeft()},function(){e.gridMan.moveRight()})},t.prototype.endGameHandler=function(t){this.keyMan.timer.timerIsEnd=!0;var e=\"\";\"lose\"==t?e=\"Oops it is Game Over right there.<br>Try again by refreshing the page ðŸ˜‰\":\"win\"==t&&(e=\"You WON!<br>Congratulations.ðŸŽ‰ðŸŽŠðŸŽ‰ðŸŽŠ\"),document.getElementById(\"message\").innerHTML=e},t}())(4)}]);","extractedComments":[]}