{"code":"!function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&\"object\"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:t}),2&i&&\"string\"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,\"a\",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p=\"\",e(e.s=0)}([function(t,i,e){\"use strict\";e.r(i);var o=function(){function t(t,i,e,o){var n=this;this.downKeyCallback=t,this.upKeyCallback=i,this.leftKeyCallback=e,this.rightKeyCallback=o,document.addEventListener(\"keydown\",function(t){n.keyDownHandler(t)},!1)}return t.prototype.keyDownHandler=function(t){39==t.keyCode?this.rightKeyCallback():37==t.keyCode?this.leftKeyCallback():40==t.keyCode?this.downKeyCallback():38==t.keyCode&&this.upKeyCallback()},t}(),n=function(){function t(t){this.grid=t,this.emptyCells=[],this.gridIsChanged=!0,this.addNewBlock(),this.addNewBlock(),this.gridIsChanged=!1}return t.prototype.addNewBlock=function(){if(this.gridIsChanged){for(var t=0;t<this.grid[0].length;t++)for(var i=0;i<this.grid.length;i++)0==this.grid[t][i]&&this.emptyCells.push({i:t,j:i});var e=this.emptyCells[Math.floor(Math.random()*this.emptyCells.length)];this.grid[e.i][e.j]=2}},t.prototype.moveRight=function(){for(var t=0;t<this.grid.length;t++)this.grid[t]=this._mergeRight(this.grid[t])},t.prototype.moveUp=function(){this._clockwiseRotate(),this.moveRight(),this._antiClockwiseRotate()},t.prototype.moveDown=function(){this._antiClockwiseRotate(),this.moveRight(),this._clockwiseRotate()},t.prototype.moveLeft=function(){this._clockwiseRotate(),this._clockwiseRotate(),this.moveRight(),this._antiClockwiseRotate(),this._antiClockwiseRotate()},t.prototype._mergeRight=function(t){for(var i=t.filter(function(t){return 0!=t}),e=i.length,o=0;o<i.length-1;o++)i[o]==i[o+1]&&(i[o]*=2,i[o+1]=0,o++);return i=i.filter(function(t){return 0!=t}),this.gridIsChanged=i.length==e,Array.apply(null,new Array(t.length-i.length)).map(function(){return 0}).concat(i)},t.prototype._clockwiseRotate=function(){for(var t=this.grid.length,i=0;i<Math.floor(t/2);i++)for(var e=i;e<t-1-i;e++){var o=this.grid[i][e];this.grid[i][e]=this.grid[t-1-e][i],this.grid[t-1-e][i]=this.grid[t-1-i][t-1-e],this.grid[t-1-i][t-1-e]=this.grid[e][t-1-i],this.grid[e][t-1-i]=o}},t.prototype._antiClockwiseRotate=function(){for(var t=this.grid.length,i=0;i<Math.floor(t/2);i++)for(var e=i;e<t-1-i;e++){var o=this.grid[i][e];this.grid[i][e]=this.grid[e][t-1-i],this.grid[e][t-1-i]=this.grid[t-1-i][t-1-e],this.grid[t-1-i][t-1-e]=this.grid[t-1-e][i],this.grid[t-1-e][i]=o}},t}();new(function(){function t(t){this.init(t)}return t.prototype.init=function(t){for(var i=this,e=0;e<t;e++)(void 0).push(0);for(e=0;e<t;e++)(void 0).push(void 0);this.gridMan=new n(void 0),this.keyMan=new o(function(){i.gridMan.moveDown()},function(){i.gridMan.moveUp()},function(){i.gridMan.moveLeft()},function(){i.gridMan.moveRight()}),this.hasWon=!1},t.prototype.printGrid=function(){console.log(this.gridMan.grid)},t}())(4)}]);","extractedComments":[]}